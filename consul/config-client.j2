{% set ip_adr = '{{ ansible_facts["all_ipv4_addresses"][0] }}' %}
{
    "node_name": "{{ ansible_hostname }}",
{% if '192.168' in ip_adr %}
   "bind_addr": "{{ ansible_facts["all_ipv4_addresses"][0] }}",
{% else %}
   "bind_addr": "{{ ansible_facts["all_ipv4_addresses"][1] }}",
{% endif %}

    "datacenter": "dc1",
    "data_dir": "/var/lib/consul",
    "domain": "consul",
    "enable_script_checks": true,
    "dns_config": {
        "enable_truncate": true,
        "only_passing": true
    },
    "enable_syslog": true,
    "encrypt": "zpjf5a4reDbJFpT6FeaF0LGxD0zBRPSRbIoUkLBt0ps=",
    "leave_on_terminate": true,
    "log_level": "INFO",
    "rejoin_after_leave": true,
    "retry_join": [
        "consul-0",
        "consul-1",
        "consul-2"
    ],
    "server": false
}